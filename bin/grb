#!/usr/bin/env ruby

# Check out the README (or try 'grb help') before you screw up your repos ;-)

THIS_FILE = File.symlink?(__FILE__) ? File.readlink(__FILE__) : __FILE__
require "#{File.dirname(THIS_FILE)}/../lib/git_remote_branch"

include GitRemoteBranch

begin
  p = read_params(ARGV)
rescue InvalidBranchError => ex
  puts ex.message
  exit 1
end

$SILENT = p[:silent]

whisper get_welcome

if p[:action] == :help
  whisper get_usage
  exit 0
end

if p[:explain]
  explain_action(p[:action], p[:branch], p[:origin], p[:current_branch])
else
  execute_action(p[:action], p[:branch], p[:origin], p[:current_branch])
end

