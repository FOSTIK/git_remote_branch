#!/usr/bin/env ruby

# Check out the README (or try grb -h) before you screw up your repos ;-)

require File.expand_path( File.join( [File.dirname(__FILE__)] + %w{ .. lib git_remote_branch } ) )
include GitRemoteBranch

print_welcome

p = read_params

if p[:action] == :help
  print_usage
  exit 0
end

if p[:current_branch].nil?
  puts 'You must specify a branch'
  print_usage
  exit 1
end

case p[:action]
  when :create
    create(p[:branch], p[:origin], p[:current_branch])
  when :delete
    delete(p[:branch], p[:origin], p[:current_branch])
  when :track
    track(p[:branch], p[:origin])
  else
    print_usage
    exit 1
end
